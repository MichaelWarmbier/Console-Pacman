#pragma once
#include <iostream>
#include <Windows.h>
#include <ctime>
#include <chrono>
#include <tchar.h>
#include <fstream>
using namespace std;
using namespace chrono;

const HDC console = GetDC(GetConsoleWindow());
const HDC hdc = CreateCompatibleDC(NULL);
const HBITMAP bmap = (HBITMAP)LoadImage(NULL, _T("PM_Sprites.bmp"), IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 

const int res = 16;
const int BW = 28, BH = 36;
enum dir { UP, DOWN, LEFT, RIGHT, NONE };
enum COLOR { RED = 0, PINK = 1, BLUE = 2, ORANGE = 3, YELLOW = 4, GRAY = 5 };

const int DefaultBoard[BH][BW] = { 
000,000,000,235,226,221,000,000,000,213,214,212,213,000,224,208,220,223,210,000,000,000,000,000,000,000,000,000,
000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
287,296,296,296,296,296,296,296,296,296,296,296,296,321,320,296,296,296,296,296,296,296,296,296,296,296,296,286,
289,322,322,322,322,322,322,322,322,322,322,322,322,307,306,322,322,322,322,322,322,322,322,322,322,322,322,288,
289,322,305,298,298,304,322,305,298,298,298,304,322,307,306,322,305,298,298,298,304,322,305,298,298,304,322,288,
289,324,307,000,000,306,322,307,000,000,000,306,322,307,306,322,307,000,000,000,306,322,307,000,000,306,324,288,
289,322,309,303,303,308,322,309,303,303,303,308,322,309,308,322,309,303,303,303,308,322,309,303,303,308,322,288,
289,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,288,
289,322,305,298,298,304,322,305,304,322,305,298,298,298,298,298,298,304,322,305,304,322,305,298,298,304,322,288,
289,322,309,303,303,308,322,307,306,322,309,303,303,317,316,303,303,308,322,307,306,322,309,303,303,308,322,288,
289,322,322,322,322,322,322,307,306,322,322,322,322,307,306,322,322,322,322,307,306,322,322,322,322,322,322,288,
291,297,297,297,297,304,322,307,318,298,298,304,402,307,306,000,305,298,298,319,306,322,305,297,297,297,297,290,
000,000,000,000,000,289,322,307,316,303,303,308,000,309,308,000,309,303,303,317,306,322,288,000,000,000,000,000,
000,000,000,000,000,289,322,307,306,000,000,000,000,000,000,000,000,000,000,307,306,322,288,000,000,000,000,000,
000,000,000,000,000,289,322,307,306,000,311,297,315,401,401,314,297,310,000,307,306,322,288,000,000,000,000,000,
296,296,296,296,296,308,322,309,308,000,288,000,000,000,000,000,000,289,000,309,308,322,309,296,296,296,296,296,
000,000,000,000,000,000,322,000,000,000,288,000,000,000,000,000,000,289,000,000,000,322,000,000,000,000,000,000,
297,297,297,297,297,304,322,305,304,000,288,000,000,000,000,000,000,289,000,305,304,322,305,297,297,297,297,297,
000,000,000,000,000,289,322,307,306,000,313,296,296,296,296,296,296,312,000,307,306,322,288,000,000,000,000,000,
000,000,000,000,000,289,322,307,306,000,000,000,000,000,000,000,000,000,000,307,306,322,288,000,000,000,000,000,
000,000,000,000,000,289,322,307,306,000,305,298,298,298,298,298,298,304,000,307,306,322,288,000,000,000,000,000,
287,296,296,296,296,308,322,309,308,000,309,303,303,317,316,303,303,308,000,309,308,322,309,296,296,296,296,286,
289,322,322,322,322,322,322,322,322,322,322,322,322,307,306,322,322,322,322,322,322,322,322,322,322,322,322,288,
289,322,305,298,298,304,322,305,298,298,298,304,322,307,306,322,305,298,298,298,304,322,305,298,298,304,322,288,
289,322,309,303,317,306,322,309,303,303,303,308,322,309,308,322,309,303,303,303,308,322,307,316,303,308,322,288,
289,324,322,322,307,306,322,322,322,322,322,322,322,000,000,322,322,322,322,322,322,322,307,306,322,322,324,288,
293,298,304,322,307,306,322,305,304,322,305,298,298,298,298,298,298,304,322,305,304,322,307,306,322,305,298,292,
295,303,308,322,309,308,322,307,306,322,309,303,303,317,316,303,303,308,322,307,306,322,309,308,322,309,303,294,
289,322,322,322,322,322,322,307,306,322,322,322,322,307,306,322,322,322,322,307,306,322,322,322,322,322,322,288,
289,322,305,298,298,298,298,319,318,298,298,304,322,307,306,322,305,298,298,319,318,298,298,298,298,304,322,288,
289,322,309,303,303,303,303,303,303,303,303,308,322,309,308,322,309,303,303,303,303,303,303,303,303,308,322,288,
289,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,322,288,
291,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,297,290,
000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000 };

bool DrawSprite(int xpos, int ypos, int ID);
bool KeyIsDown(char key, bool pressed, bool held);
double GetTime();
double GetTimeSince(double startTime);
double Wait(double waitTime);
void ShowConsoleCursor(bool showFlag);
void TransferBoardData(int a1[BH][BW], int a2[BH][BW]);
void TransferBoardData(const int a1[BH][BW], int a2[BH][BW]);
